<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreeMath v0.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: system-ui, sans-serif; }
        .code-editor, .console {
            font-family: 'Courier New', monospace;
            background:#1e293b; color:#f8fafc; border-radius:0.375rem; padding:1rem;
        }
        .code-editor {
            min-height:300px; max-height:400px; overflow:auto;
            white-space:pre-wrap; word-wrap:break-word; outline:none;
        }
        .code-editor:focus { outline:2px solid #3b82f6; }
        .code-editor:empty:before{ content:"Enter JavaScript code here..."; color:#64748b; font-style:italic; }
        .console { min-height:300px; max-height:400px; overflow:auto; display:flex; flex-direction:column-reverse; }
        .console-output { flex:1; overflow:auto; }
        .console-input-wrapper { display:flex; align-items:center; gap:.5rem; }
        .console-prompt { color:#10b981; font-weight:bold; }
        .console-input {
            flex:1; background:transparent; border:none; outline:none; color:#f8fafc; font-family:inherit; font-size:inherit;
        }
        .console-error { color:#ef4444; }
        .console-warn { color:#f59e0b; }
        .console-log { color:#f8fafc; }
        .dark .bg-white { background:#1e293b; }
        .dark .text-gray-800 { color:#f8fafc; }
        .dark .bg-gray-100 { background:#334155; }
        .dark .text-gray-600 { color:#cbd5e1; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4 transition-colors">
    <div class="w-full max-w-6xl bg-white rounded-xl shadow-xl overflow-hidden transition-colors">
        <!-- Header -->
        <div class="bg-indigo-600 text-white p-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold">FreeMath</h1>
            <div class="flex space-x-2">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-indigo-500 transition">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="p-2 rounded-full hover:bg-indigo-500 transition">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="flex border-b">
            <button id="simple-tab" class="flex-1 py-3 font-medium text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50">Simple Calculator</button>
            <button id="advanced-tab" class="flex-1 py-3 font-medium text-gray-500 hover:text-indigo-600">Programming Mode</button>
        </div>

        <!-- Simple Calculator -->
        <div id="simple-calculator" class="p-4">
            <div class="mb-4">
                <div class="bg-gray-100 p-3 rounded-lg text-right text-3xl font-semibold h-16 overflow-x-auto" id="display">0</div>
                <div class="text-right text-gray-500 text-sm h-5 mt-1" id="previous-operation"></div>
            </div>
            <div class="grid grid-cols-4 gap-3">
                <button class="btn-clear bg-red-500 hover:bg-red-600 text-white p-3 rounded-lg font-medium">AC</button>
                <button class="btn-operation bg-gray-200 hover:bg-gray-300 p-3 rounded-lg font-medium">(</button>
                <button class="btn-operation bg-gray-200 hover:bg-gray-300 p-3 rounded-lg font-medium">)</button>
                <button class="btn-operation bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-lg font-medium">/</button>

                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">7</button>
                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">8</button>
                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">9</button>
                <button class="btn-operation bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-lg font-medium">*</button>

                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">4</button>
                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">5</button>
                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">6</button>
                <button class="btn-operation bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-lg font-medium">-</button>

                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">1</button>
                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">2</button>
                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">3</button>
                <button class="btn-operation bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-lg font-medium">+</button>

                <button class="btn-number bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">0</button>
                <button class="btn-decimal bg-gray-100 hover:bg-gray-200 p-3 rounded-lg font-medium">.</button>
                <button class="btn-delete bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg font-medium">
                    <i class="fas fa-backspace"></i>
                </button>
                <button class="btn-equals bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg font-medium">=</button>
            </div>
            <div id="history" class="mt-4 text-sm text-gray-600 space-y-1"></div>
        </div>

        <!-- Advanced Calculator -->
        <div id="advanced-calculator" class="p-4 hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <!-- Code Editor -->
                <div>
                    <h3 class="text-lg font-semibold mb-2">JavaScript Editor</h3>
                    <textarea id="code-editor" class="code-editor w-full" placeholder="Enter JavaScript code here..."></textarea>
                    <div class="mt-4 flex gap-2">
                        <button id="run-code" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                            <i class="fas fa-play mr-2"></i>Run Code
                        </button>
                        <button id="clear-code" class="flex-1 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">
                            <i class="fas fa-trash mr-2"></i>Clear
                        </button>
                    </div>
                </div>

                <!-- Console Output -->
                <div>
                    <h3 class="text-lg font-semibold mb-2">Console</h3>
                    <div id="console" class="console">
                        <div id="console-output" class="console-output">
                            <div>JavaScript Console ready. Run code to see output here.</div>
                        </div>
                        <div class="console-input-wrapper">
                            <span class="console-prompt">></span>
                            <input id="console-input" class="console-input" placeholder="Enter command..." autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const themeToggle = document.getElementById('theme-toggle');
        let isDark = false;
        themeToggle.addEventListener('click', () => {
            isDark = !isDark;
            document.body.classList.toggle('dark', isDark);
            themeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        const simpleTab = document.getElementById('simple-tab');
        const advancedTab = document.getElementById('advanced-tab');
        const simpleCalculator = document.getElementById('simple-calculator');
        const advancedCalculator = document.getElementById('advanced-calculator');

        simpleTab.addEventListener('click', () => {
            simpleTab.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600', 'bg-indigo-50');
            simpleTab.classList.remove('text-gray-500');
            advancedTab.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600', 'bg-indigo-50');
            advancedTab.classList.add('text-gray-500');
            simpleCalculator.classList.remove('hidden');
            advancedCalculator.classList.add('hidden');
        });

        advancedTab.addEventListener('click', () => {
            advancedTab.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600', 'bg-indigo-50');
            advancedTab.classList.remove('text-gray-500');
            simpleTab.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600', 'bg-indigo-50');
            simpleTab.classList.add('text-gray-500');
            advancedCalculator.classList.remove('hidden');
            simpleCalculator.classList.add('hidden');
        });

        let expression = '';
        const display = document.getElementById('display');
        const previousOperationDisplay = document.getElementById('previous-operation');
        const historyContainer = document.getElementById('history');
        let history = [];

        function updateDisplay() { display.textContent = expression || '0'; }
        function resetCalculator() {
            expression = '';
            previousOperationDisplay.textContent = '';
            updateDisplay();
        }
        function inputDigit(digit) { expression += digit; updateDisplay(); }
        function inputDecimal() { expression += expression.endsWith('.') ? '' : '.'; updateDisplay(); }
        function inputOperation(op) { expression += op; updateDisplay(); }
        function handleEquals() {
            try {
                const result = eval(expression);
                previousOperationDisplay.textContent = expression + ' =';
                history.unshift(expression + ' = ' + result);
                if (history.length > 10) history.pop();
                renderHistory();
                expression = String(result);
                updateDisplay();
            } catch { display.textContent = 'Error'; }
        }
        function deleteLastDigit() { expression = expression.slice(0, -1); updateDisplay(); }
        function renderHistory() {
            historyContainer.innerHTML = '';
            history.forEach((item, index) => {
                const div = document.createElement('div');
                div.textContent = item;
                div.className = 'cursor-pointer hover:text-indigo-600';
                div.addEventListener('click', () => {
                    expression = item.split(' = ')[0];
                    updateDisplay();
                });
                historyContainer.appendChild(div);
            });
        }

        document.querySelectorAll('.btn-number').forEach(btn => btn.addEventListener('click', () => inputDigit(btn.textContent)));
        document.querySelectorAll('.btn-operation').forEach(btn => btn.addEventListener('click', () => inputOperation(btn.textContent)));
        document.querySelector('.btn-equals').addEventListener('click', handleEquals);
        document.querySelector('.btn-clear').addEventListener('click', resetCalculator);
        document.querySelector('.btn-delete').addEventListener('click', deleteLastDigit);
        document.querySelector('.btn-decimal').addEventListener('click', inputDecimal);

        const codeEditor = document.getElementById('code-editor');
        const runCodeBtn = document.getElementById('run-code');
        const clearCodeBtn = document.getElementById('clear-code');
        const consoleOutput = document.getElementById('console-output');
        const consoleInput = document.getElementById('console-input');

        function addToConsole(type, ...args) {
            const div = document.createElement('div');
            div.className = `console-${type}`;
            div.textContent = args.map(a => typeof a === 'object' ? JSON.stringify(a, null, 2) : String(a)).join(' ');
            consoleOutput.prepend(div);
        }

        const originalLog = console.log, originalError = console.error, originalWarn = console.warn;
        console.log = (...args) => { originalLog(...args); addToConsole('log', ...args); };
        console.error = (...args) => { originalError(...args); addToConsole('error', ...args); };
        console.warn = (...args) => { originalWarn(...args); addToConsole('warn', ...args); };

        runCodeBtn.addEventListener('click', () => {
            const code = codeEditor.value;
            if (!code.trim()) return;
            try {
                const result = eval(code);
                if (result !== undefined) console.log(result);
            } catch (err) { console.error(err.message); }
        });

        clearCodeBtn.addEventListener('click', () => {
            codeEditor.value = '';
            consoleOutput.innerHTML = '<div>Console cleared.</div>';
        });

        consoleInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const cmd = consoleInput.value;
                if (!cmd.trim()) return;
                consoleInput.value = '';
                addToConsole('log', `> ${cmd}`);
                try {
                    const result = eval(cmd);
                    if (result !== undefined) console.log(result);
                } catch (err) { console.error(err.message); }
            }
        });

        updateDisplay();
    </script>
</body>
</html>
